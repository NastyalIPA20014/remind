import{a as e,j as t}from"./index.BEKffTCe.js";import{r as l}from"./vendor.D19QI8Si.js";import{u as s,M as r,G as a}from"./esm.v6d0j9yT.js";import{n as o,X as i,o as n}from"./icons.B27eQM06.js";import{A as c,m as d}from"./animation.CbnW-eHj.js";const p={width:"100%",height:"100%"},m=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],y=({theme:y})=>{const[b,x]=l.useState([]),[f,h]=l.useState({lat:55.75,lng:37.61}),[u,g]=l.useState(10),[T,w]=l.useState(!1),[k,j]=l.useState(null),{isLoaded:v,loadError:N}=s({id:"google-map-script",googleMapsApiKey:"AIzaSyDdiE5mKLaeTwR58iHtxMVusmcdGltazzI"});l.useEffect(()=>{e.getMarkers().then(x);const t=localStorage.getItem("user_region_data");if(t){const e=JSON.parse(t);h({lat:e.lat,lng:e.lng}),g(e.zoom)}},[]);const z=e=>{k&&(k.panTo({lat:e.lat,lng:e.lng}),k.setZoom(14)),w(!1)},S=l.useMemo(()=>({disableDefaultUI:!0,styles:"dark"===y?m:[]}),[y]),I=l.useMemo(()=>b.map(e=>t.jsx(r,{position:{lat:e.lat,lng:e.lng},onClick:()=>z(e)},e.id)),[b,k]);return N?t.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-red-900 text-white p-4",children:"Ошибка загрузки карты. Возможно, проблема с API ключом."}):t.jsxs("div",{className:"h-screen w-full relative bg-gray-900 overflow-hidden",children:[v?t.jsx(a,{mapContainerStyle:p,center:f,zoom:u,options:S,onLoad:j,children:I}):t.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-gray-900",children:"Загрузка карты..."}),t.jsxs("div",{className:"absolute top-12 left-4 right-4 z-[1000] pointer-events-none flex justify-between items-start",children:[t.jsx("button",{onClick:()=>w(!0),className:"pointer-events-auto p-3 rounded-2xl shadow-lg backdrop-blur-md border transition active:scale-95 "+("dark"===y?"bg-black/60 text-white border-white/10":"bg-white/80 text-black border-black/5"),children:t.jsx(o,{size:20})}),t.jsxs("div",{className:"px-4 py-2 rounded-full flex items-center gap-2 backdrop-blur-md shadow-lg border pointer-events-auto "+("dark"===y?"bg-black/60 text-white border-white/10":"bg-white/80 text-black border-black/5"),children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse shadow-[0_0_10px_red]"}),t.jsx("span",{className:"text-xs font-bold tracking-widest",children:"LIVE"})]})]}),t.jsx(c,{children:T&&t.jsxs(d.div,{initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},className:"absolute top-0 left-0 bottom-0 w-64 z-[1000] p-6 pt-20 shadow-2xl backdrop-blur-xl border-r "+("dark"===y?"bg-black/80 border-white/10 text-white":"bg-white/90 border-black/5 text-black"),children:[t.jsx("button",{onClick:()=>w(!1),className:"absolute top-6 right-6 p-2 rounded-full hover:bg-gray-500/20",children:t.jsx(i,{size:20})}),t.jsx("h2",{className:"text-xl font-black mb-6",children:"ОПАСНЫЕ ЗОНЫ"}),t.jsxs("div",{className:"space-y-3 overflow-y-auto max-h-full pb-20",children:[b.map(e=>t.jsxs("div",{onClick:()=>z(e),className:"p-4 rounded-xl border cursor-pointer active:scale-95 transition "+("dark"===y?"bg-white/5 border-white/5 hover:bg-white/10":"bg-black/5 border-black/5 hover:bg-black/10"),children:[t.jsx("div",{className:"font-bold text-sm",children:e.desc}),t.jsxs("div",{className:"text-[10px] opacity-50 mt-1 flex items-center gap-1",children:[t.jsx(n,{size:10})," Показать"]})]},e.id)),0===b.length&&t.jsx("div",{className:"text-sm opacity-50",children:"Нет меток"})]})]})})]})};export{y as default};
