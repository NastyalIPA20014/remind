import{a as e,j as l}from"./index.BEKffTCe.js";import{r as a}from"./vendor.D19QI8Si.js";import{u as t,M as s,G as r}from"./esm.v6d0j9yT.js";import"./icons.B27eQM06.js";import"./animation.CbnW-eHj.js";const n={width:"100%",height:"100%",borderRadius:"10px"},i=[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],o=()=>{const[o,d]=a.useState("dash"),[p,u]=a.useState(3),[x,h]=a.useState("Москва"),[m,b]=a.useState([]),[g,y]=a.useState([]),[f,j]=a.useState([]),[v,N]=a.useState([]),[k,w]=a.useState({lat:55.75,lng:37.61}),[T,C]=a.useState({name:"",handle:"",avatar:"",is_verified:!1}),[S,M]=a.useState({author_id:"",text:"",image:""}),[L,A]=a.useState([]),[I,E]=a.useState({label:"",icon:"Info",link:""}),{isLoaded:D,loadError:R}=t({id:"google-map-script-admin",googleMapsApiKey:"AIzaSyDdiE5mKLaeTwR58iHtxMVusmcdGltazzI"});a.useEffect(()=>{z()},[]);const z=()=>{e.getSettings().then(e=>{u(e.index),h(e.region)}),e.getHistory().then(b),e.getAuthors().then(A),e.getButtons().then(y),e.getReports().then(j),e.getMarkers().then(N)},_=async()=>{await e.saveSetting("index",p),await e.saveSetting("region",x),e.clearCache(),await z(),alert("✅ Сохранено")},B=l=>{const a=prompt("Описание:");a&&e.addMarker({lat:l.latLng.lat(),lng:l.latLng.lng(),desc:a}).then(z)},H=a.useMemo(()=>({disableDefaultUI:!0,styles:i}),[]),F=a.useMemo(()=>v.map(e=>l.jsx(s,{position:{lat:e.lat,lng:e.lng}},e.id)),[v]);return l.jsxs("div",{className:"w-full h-screen bg-gray-900 text-white font-sans flex text-sm",children:[l.jsxs("div",{className:"w-60 bg-[#252526] border-r border-white/5 flex flex-col p-4 gap-1 pt-10",children:[l.jsx("div",{className:"text-xs text-gray-500 font-bold mb-2",children:"ADMIN PANEL v6"}),l.jsx(c,{label:"Dashboard",active:"dash"===o,onClick:()=>d("dash")}),l.jsx(c,{label:"Editor: History",active:"hist"===o,onClick:()=>d("hist")}),l.jsx(c,{label:"Editor: News",active:"news"===o,onClick:()=>d("news")}),l.jsx(c,{label:"Editor: Buttons",active:"btns"===o,onClick:()=>d("btns")}),l.jsx(c,{label:"Map & Markers",active:"map"===o,onClick:()=>d("map")}),l.jsx(c,{label:"Reports",active:"rep"===o,onClick:()=>d("rep")})]}),l.jsx("div",{className:"flex-1 bg-[#1e1e1e] p-8 overflow-y-auto",children:(()=>{if("map"===o)return R?l.jsx("div",{className:"text-red-500",children:"Ошибка загрузки карты."}):D?l.jsx("div",{className:"h-full flex flex-col",children:l.jsxs("div",{className:"h-full relative",children:[l.jsx(r,{mapContainerStyle:n,center:k,zoom:10,options:H,onClick:B,children:F}),l.jsxs("div",{className:"absolute top-4 right-4 bg-black/70 p-4 rounded-lg z-10 w-64 backdrop-blur-sm border border-white/10",children:[l.jsx("h3",{className:"font-bold mb-2 text-white",children:"Метки"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:v.length>0?v.map(a=>l.jsxs("div",{className:"flex justify-between items-center bg-white/10 p-2 rounded text-xs text-white",children:[l.jsx("span",{children:a.desc}),l.jsx("button",{onClick:()=>{return l=a.id,void(window.confirm("Удалить метку?")&&e.deleteMarker(l).then(z));var l},className:"text-red-500 hover:text-red-400 ml-2 shrink-0",children:"Delete"})]},a.id)):l.jsx("div",{className:"text-xs text-gray-400",children:"Кликните на карту, чтобы добавить метку."})})]})]})}):l.jsx("div",{children:"Загрузка карты..."});switch(o){case"dash":return l.jsxs("div",{className:"max-w-md space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Главная"}),l.jsxs("div",{className:"bg-[#2c2c2e] p-5 rounded-xl",children:[l.jsxs("label",{className:"block text-gray-400 mb-2",children:["Индекс: ",Number(p).toFixed(1)]}),l.jsx("input",{type:"range",min:"1",max:"11",step:"0.1",value:p,onChange:e=>u(parseFloat(e.target.value)),className:"w-full mb-4"}),l.jsx("label",{className:"block text-gray-400 mb-2",children:"Регион"}),l.jsx("input",{value:x,onChange:e=>h(e.target.value),className:"w-full bg-black/30 p-2 rounded mb-4"}),l.jsx("button",{onClick:_,className:"bg-blue-600 px-4 py-2 rounded",children:"Сохранить"})]})]});case"hist":return l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Редактор Истории (180 дней)"}),l.jsx("div",{className:"grid grid-cols-1 gap-1",children:m.map(a=>l.jsxs("div",{onClick:()=>(l=>{const a=prompt("Новое значение для "+l);a&&!isNaN(parseFloat(a))?e.updateHistory(l,a).then(()=>z()).catch(e=>alert("❌ Ошибка: "+e)):a&&alert("❌ Введите число")})(a.date),className:"flex justify-between p-2 bg-[#2c2c2e] hover:bg-[#3c3c3e] cursor-pointer rounded border border-white/5",children:[l.jsx("span",{children:a.date}),l.jsx("span",{className:"font-mono text-green-400",children:a.value})]},a.date))})]});case"news":return l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-[#2c2c2e] p-4 rounded-xl space-y-3",children:[l.jsx("h3",{className:"font-bold",children:"1. Создать Автора"}),l.jsx("input",{placeholder:"Имя",value:T.name,onChange:e=>C({...T,name:e.target.value}),className:"w-full bg-black/30 p-2 rounded"}),l.jsx("input",{placeholder:"@handle",value:T.handle,onChange:e=>C({...T,handle:e.target.value}),className:"w-full bg-black/30 p-2 rounded"}),l.jsx("input",{placeholder:"Avatar URL",value:T.avatar,onChange:e=>C({...T,avatar:e.target.value}),className:"w-full bg-black/30 p-2 rounded"}),l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:T.is_verified,onChange:e=>C({...T,is_verified:e.target.checked})})," Verified"]}),l.jsx("button",{onClick:()=>{e.createAuthor(T).then(z)},className:"bg-blue-600 w-full py-2 rounded",children:"Создать"})]}),l.jsxs("div",{className:"bg-[#2c2c2e] p-4 rounded-xl space-y-3",children:[l.jsx("h3",{className:"font-bold",children:"2. Пост"}),l.jsxs("select",{onChange:e=>M({...S,author_id:e.target.value}),className:"w-full bg-black/30 p-2 rounded",children:[l.jsx("option",{children:"Автор..."}),L.map(e=>l.jsx("option",{value:e.id,children:e.name},e.id))]}),l.jsx("textarea",{placeholder:"Текст",value:S.text,onChange:e=>M({...S,text:e.target.value}),className:"w-full bg-black/30 p-2 rounded"}),l.jsx("input",{placeholder:"Image URL",value:S.image,onChange:e=>M({...S,image:e.target.value}),className:"w-full bg-black/30 p-2 rounded"}),l.jsx("button",{onClick:()=>{e.postNews(S).then(z)},className:"bg-green-600 w-full py-2 rounded",children:"Опубликовать"})]})]});case"btns":return l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Кнопки на главной"}),l.jsxs("div",{className:"bg-[#2c2c2e] p-4 rounded mb-4 flex gap-2",children:[l.jsx("input",{placeholder:"Название",value:I.label,onChange:e=>E({...I,label:e.target.value}),className:"bg-black/30 p-2 rounded"}),l.jsxs("select",{value:I.icon,onChange:e=>E({...I,icon:e.target.value}),className:"bg-black/30 p-2 rounded",children:[l.jsx("option",{value:"Info",children:"Info"}),l.jsx("option",{value:"Shield",children:"Shield"}),l.jsx("option",{value:"Zap",children:"Zap"}),l.jsx("option",{value:"Link",children:"Link"})]}),l.jsx("input",{placeholder:"Ссылка",value:I.link,onChange:e=>E({...I,link:e.target.value}),className:"bg-black/30 p-2 rounded flex-1"}),l.jsx("button",{onClick:()=>{e.addButton(I).then(z)},className:"bg-blue-600 px-4 rounded",children:"Add"})]}),l.jsx("div",{className:"space-y-2",children:g.map(a=>l.jsxs("div",{className:"flex justify-between bg-[#2c2c2e] p-3 rounded",children:[l.jsxs("span",{children:[a.label," (",a.icon,")"]}),l.jsx("button",{onClick:()=>{e.deleteButton(a.id).then(z)},className:"text-red-500",children:"Del"})]},a.id))})]});case"rep":return l.jsx("div",{className:"space-y-4",children:f.map(e=>l.jsxs("div",{className:"bg-[#2c2c2e] p-4 rounded border border-white/5",children:[l.jsx("div",{className:"text-xs text-gray-500",children:e.date}),l.jsx("p",{children:e.text}),e.image&&l.jsx("img",{src:e.image,className:"max-h-40 mt-2"})]},e.id))});default:return null}})()})]})},c=({label:e,active:a,onClick:t})=>l.jsx("button",{onClick:t,className:"w-full text-left px-3 py-2 rounded "+(a?"bg-blue-600":"hover:bg-white/5 text-gray-400"),children:e});export{o as default};
